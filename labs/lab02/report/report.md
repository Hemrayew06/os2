---
## Front matter
title: "Отчёт по лабораторной работе №2"
subtitle: "Управление пользователями и группами"
author: "Максат Хемраев"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить представление о работе с учётными записями пользователей и группами пользователей в операционной системе типа Linux.

# Отчёт по выполнению работы  

## Управление учетными записями и группой *wheel*

1. Вход в систему был осуществлён под пользователем **mhemraev**.  
   Определил основные параметры учётной записи: идентификатор пользователя, идентификатор группы и принадлежность к дополнительной группе **wheel**.  

   ![Проверка пользователя mhemraev](Screenshot_1.png){ #fig:001 width=80% }

2. Затем выполнил переход к суперпользователю **root**.  
   Проверка подтвердила, что теперь активна учётная запись администратора с максимальными правами доступа.  

3. В режиме защиты от ошибок открыл файл конфигурации прав доступа.  
   Для этого применил специальную команду, которая позволяет проверить корректность синтаксиса и тем самым предотвратить сбои в работе системы.  

   ![Редактирование файла sudoers](Screenshot_2.png){ #fig:002 width=80% }

4. В конфигурации обнаружил строку, разрешающую всем участникам группы **wheel** выполнять команды от имени администратора. Именно эта группа используется для делегирования привилегий суперпользователя.  

5. Создал нового пользователя **alice**, добавил его в группу **wheel** и установил пароль. Проверка показала, что alice действительно получил членство в этой группе.  

6. После этого переключился на пользователя **alice**. Под его учётной записью создал ещё одного пользователя — **bob**. Для него также задал пароль. Проверка показала, что bob существует только в своей основной группе.  

   ![Создание пользователя alice и bob](Screenshot_3.png){ #fig:003 width=80% }

---

## Создание новых пользователей

1. Изучил настройки в файле **/etc/login.defs**.  
   Убедился, что параметр **CREATE_HOME** имеет значение *yes*, благодаря чему домашние каталоги для новых учётных записей создаются автоматически.  
   Также обратил внимание на параметр **USERGROUPS_ENAB**, установленный в *no* — это гарантирует, что все новые пользователи будут помещаться в общую группу *users*.  

   ![Изменение login.defs](Screenshot_4.png){ #fig:004 width=80% }

2. В шаблонный каталог **/etc/skel** добавил директории *Pictures* и *Documents*.  
   Теперь эти папки автоматически копируются в домашние каталоги при создании новых пользователей.  
   Кроме того, в файл *.bashrc* добавил строку, назначающую редактор **vim** программой по умолчанию.  

   ![Изменение файла .bashrc](Screenshot_5.png){ #fig:005 width=80% }

3. Создал учётную запись **carol** и установил для неё пароль.  
   После входа под этим пользователем проверил, что она принадлежит к группе *users*, а в домашнем каталоге действительно присутствуют добавленные ранее папки *Pictures* и *Documents*.  

   ![Создание пользователя carol](Screenshot_6.png){ #fig:006 width=80% }

4. В файле **/etc/shadow** нашёл строку с зашифрованным паролем carol.  
   Далее изменил параметры его действия: установил срок 90 дней, добавил предупреждение за 3 дня до окончания и ограничил минимальный срок использования до 30 дней.  

   ![Настройка срока действия пароля](Screenshot_7.png){ #fig:007 width=80% }

5. Проверил, как учётные записи отображаются в системных файлах:  
   - **alice** присутствует в */etc/passwd*, */etc/shadow* и */etc/group*.  
   - **carol** отсутствует в одном из этих файлов, что подтверждает различие в хранении пользовательских данных.  

---

## Работа с группами

1. Под пользователем **alice** создал две новые группы: *main* и *third*.  

2. В состав группы *main* включил пользователей **alice** и **bob**, а в группу *third* добавил **carol**.  

3. Проверка состава групп показала следующее:  
   - У **carol** основная группа — *users* (gid=100), дополнительно она состоит в *third*.  
   - У **alice** основной группой является её личная, при этом она также входит в *wheel* и *main*.  
   - У **bob** основная группа совпадает с его именем, кроме того, он состоит в *main*.  

   ![Работа с группами](Screenshot_8.png){ #fig:008 width=80% }


# Контрольные вопросы

### 1. При помощи каких команд можно получить информацию о номере (идентификаторе), назначенном пользователю Linux, о группах, в которые включён пользователь?
- `id <имя_пользователя>` — выводит UID, GID и список групп.
- `whoami` — показывает имя текущего пользователя.
- `groups <имя_пользователя>` — отображает группы, в которые входит пользователь.

Пример:
```bash
whoami
id alice
groups bob
```

---

### 2. Какой UID имеет пользователь root? При помощи какой команды можно узнать UID пользователя? Приведите примеры.
- У пользователя **root** всегда **UID = 0**.
- Для проверки используется команда `id`.

Пример:
```bash
id root
```
Вывод: `uid=0(root) gid=0(root) groups=0(root)`

---

### 3. В чём состоит различие между командами su и sudo?
- `su` — переключает текущую оболочку на другого пользователя (по умолчанию root) после ввода его пароля.
- `sudo` — позволяет выполнить одну команду от имени root или другого пользователя, используя пароль текущего пользователя (если он имеет права).

---

### 4. В каком конфигурационном файле определяются параметры sudo?
- В файле: **`/etc/sudoers`**

---

### 5. Какую команду следует использовать для безопасного изменения конфигурации sudo?
- Используется команда:
```bash
sudo visudo
```
Она открывает файл `/etc/sudoers` в безопасном режиме и проверяет синтаксис.

---

### 6. Если вы хотите предоставить пользователю доступ ко всем командам администрирования системы через sudo, членом какой группы он должен быть?
- Пользователь должен быть членом группы **wheel** (в некоторых дистрибутивах — **sudo**).

---

### 7. Какие файлы/каталоги можно использовать для определения параметров, которые будут использоваться при создании учётных записей пользователей? Приведите примеры настроек.
- **`/etc/login.defs`** — общие настройки создания пользователей.
  - Пример:
    ```
    CREATE_HOME yes
    USERGROUPS_ENAB no
    ```
- **`/etc/skel/`** — содержит шаблонные файлы и директории для новых пользователей.
  - Пример: `.bashrc`, каталоги `Documents`, `Pictures`.

---

### 8. Где хранится информация о первичной и дополнительных группах пользователей ОС типа Linux? В отчёте приведите пояснение таких записей для пользователя alice.
- Основные файлы:
  - **`/etc/passwd`** — хранит UID, GID, домашний каталог и оболочку пользователя.
  - **`/etc/group`** — содержит список групп и их участников.
  - **`/etc/shadow`** — зашифрованные пароли и политика их использования.

Пример записи для **alice**:
- В `/etc/passwd`:
  ```
  alice:x:1001:1001:/home/alice:/bin/bash
  ```
  Здесь UID=1001, GID=1001, домашняя папка — `/home/alice`.

- В `/etc/group`:
  ```
  alice:x:1001:
  wheel:x:10:mhemraev,alice
  main:x:1003:alice,bob
  ```
  Здесь видно, что alice состоит в группах **alice**, **wheel**, **main**.

---

### 9. Какие команды вы можете использовать для изменения информации о пароле пользователя (например о сроке действия пароля)?
- `passwd <имя_пользователя>` — изменение пароля.
- `chage <опции> <имя_пользователя>` — управление сроком действия.

Примеры:
```bash
chage -M 90 -m 30 -W 7 carol
```
- максимальный срок действия пароля — 90 дней,
- минимальный срок использования — 30 дней,
- предупреждение за 7 дней.

---

### 10. Какую команду следует использовать для прямого изменения информации в файле /etc/group и почему?
- Используется команда:
```bash
vigr
```
Она безопасно редактирует `/etc/group`, блокируя файл от одновременного изменения разными процессами. Это предотвращает повреждение системных данных.

---

# Заключение

В ходе работы были изучены основы управления пользователями и группами в Linux, а также методы настройки прав доступа и параметров паролей.
