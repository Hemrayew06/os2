---
## Front matter
title: "Отчёт по лабораторной работе №6"
subtitle: "Управление процессами"
author: "Максат Хемраев"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки управления процессами операционной системы.

# Отчёт по выполнению работы  

## Управление заданиями в Linux  

1. Вошёл в систему с полномочиями администратора с помощью команды **su**.  

2. Запустил три задания:  
   - **sleep 3600** в фоновом режиме;  
   - **dd if=/dev/zero of=/dev/null** в фоновом режиме;  
   - **sleep 7200** — без указания `&`, поэтому оболочка ожидала завершения процесса.  

   Для приостановки последней команды применил комбинацию **Ctrl+Z**.  

   ![Запуск и приостановка процессов](Screenshot_1.png){ #fig:001 width=80% }  

3. С помощью команды **jobs** проверил список заданий. Первые два процесса находились в состоянии *Running*, а третий — в состоянии *Stopped*.  

4. Перевёл задание 3 в фоновый режим с помощью команды **bg 3**.  
   После повторной проверки с помощью **jobs** убедился, что все три задания работают в фоне.  

5. Перенёс задание 1 на передний план командой **fg 1**, затем завершил его с помощью **Ctrl+C**. Аналогично были завершены задания 2 и 3.  

6. В новом терминале под обычным пользователем запустил команду **dd if=/dev/zero of=/dev/null &**.  
   После этого закрыл терминал командой **exit**.  

7. В другом терминале под своей учётной записью запустил мониторинг процессов с помощью утилиты **top**. В списке был виден процесс **dd**, который продолжал выполняться.  

   ![Процесс dd в списке top](Screenshot_2.png){ #fig:002 width=80% }  

8. Повторно запустил **top** и завершил задание **dd** с помощью горячей клавиши **k**, указав PID процесса. После завершения процесса покинул утилиту командой **q**.  

   ![Завершение процесса dd в top](Screenshot_3.png){ #fig:003 width=80% }  

## Управление процессами в Linux  

1. Получил полномочия администратора с помощью команды **su**.  

2. Запустил три ресурсоёмких процесса в фоне:  
   - **dd if=/dev/zero of=/dev/null &** (трижды).  

3. Проверил список активных процессов, отфильтровав только те, что содержат **dd**, с помощью команды **ps aux | grep dd**. В выводе отобразились PID всех запущенных процессов **dd**.  

   ![Список процессов dd](Screenshot_4.png){ #fig:004 width=80% }  

4. Изменил приоритет одного из процессов с помощью команды **renice -n 5 \<PID\>**, что позволило задать новый приоритет.  

5. Выполнил команду **ps fax | grep -B5 dd**, чтобы просмотреть дерево процессов. В выводе отобразилась иерархия, где процессы **dd** были запущены из родительской оболочки **bash**, запущенной от имени суперпользователя.  

   ![Иерархия процессов dd](Screenshot_5.png){ #fig:005 width=80% }  

6. Определил PID корневой оболочки и завершил её вместе с дочерними процессами с помощью команды **kill -9 \<PID\>**. В результате оболочка закрылась, а все процессы **dd** были автоматически завершены.  

## Задание 1. Управление приоритетами и завершением процессов  

1. Получил полномочия администратора с помощью команды **su**.  

2. Запустил три фоновых процесса командой **dd if=/dev/zero of=/dev/null &**. Каждый процесс получил свой PID.  

3. Изменил приоритет одного из процессов:  
   - сначала задал значение **-5** с помощью команды **renice -n 5 \<PID\>**;  
   - затем изменил тот же процесс на приоритет **-15**.  

   Разница заключается в том, что чем меньше (и более отрицательное) значение nice, тем выше приоритет выполнения процесса. При **-5** процесс получает больше ресурсов процессора по сравнению с обычными задачами, а при **-15** его приоритет становится ещё выше, что может повлиять на производительность остальных процессов системы.  

4. Завершил все запущенные процессы **dd**, используя команду **kill \<PID\>** для каждого из них.  

   ![Управление приоритетами и завершение процессов](Screenshot_6.png){ #fig:006 width=80% }  

## Задание 2. Управление процессами с использованием программы *yes*  

1. Запустил программу **yes** в фоновом режиме с перенаправлением вывода в **/dev/null**.  

2. Запустил **yes** на переднем плане с подавлением вывода. Остановил выполнение комбинацией **Ctrl+Z**, затем вновь запустил и завершил процесс.  

   ![Запуск и остановка yes](Screenshot_7.png){ #fig:007 width=80% }  

3. Запустил **yes** на переднем плане без подавления вывода. Приостановил выполнение, затем продолжил и завершил процесс.  

4. Проверил состояния процессов с помощью команды **jobs** — отобразились все текущие задания и их статусы (*Running* или *Stopped*).  

   ![Состояния заданий](Screenshot_8.png){ #fig:008 width=80% }  

5. Перевёл один из процессов на передний план (**fg**), после чего остановил его.  

6. Перевёл другой процесс с подавлением вывода в фоновый режим командой **bg**, что изменило его статус на *Running*.  

7. Запустил процесс в фоне с помощью **nohup yes > /dev/null &**, что позволило сохранить его выполнение даже после выхода из терминала. Проверка показала, что процесс продолжил работу.  

   ![Работа nohup-процесса](Screenshot_9.png){ #fig:009 width=80% }  

8. Получил информацию о процессах с помощью утилиты **top**, где был виден работающий процесс **yes**.  

   ![Процесс yes в top](Screenshot_10.png){ #fig:010 width=80% }  

9. Запустил ещё три процесса **yes** в фоне с подавлением вывода. Завершил их разными способами: один через **kill \<PID\>**, другой через **kill -\<номер задания\>**, а оставшиеся командой **killall yes**.  

   ![Завершение процессов yes](Screenshot_11.png){ #fig:011 width=80% }  

10. Запустил два процесса **yes**: один с обычным приоритетом, второй с повышенным приоритетом с помощью **nice -n 5**. Сравнил приоритеты с помощью **ps -l**: значения поля **NI** (nice value) оказались разными.  

11. Изменил приоритет одного из процессов с помощью команды **renice**, чтобы оба процесса имели одинаковое значение приоритета.  

# Контрольные вопросы  

### 1. Какая команда даёт обзор всех текущих заданий оболочки?  
- Команда **jobs** отображает список всех запущенных заданий в текущей оболочке с указанием их состояния (*Running*, *Stopped* и т.д.).  

---

### 2. Как остановить текущее задание оболочки, чтобы продолжить его выполнение в фоновом режиме?  
- Для остановки используется комбинация **Ctrl+Z**.  
- Чтобы возобновить выполнение задания в фоне — команда **bg \<номер_задания\>**.  

---

### 3. Какую комбинацию клавиш можно использовать для отмены текущего задания оболочки?  
- Комбинация **Ctrl+C** завершает текущее активное задание.  

---

### 4. Необходимо отменить одно из начатых заданий. Доступ к оболочке, в которой в данный момент работает пользователь, невозможен. Что можно сделать, чтобы отменить задание?  
- Использовать команду **kill \<PID\>** или **killall \<имя_процесса\>** из другой оболочки.  

---

### 5. Какая команда используется для отображения отношений между родительскими и дочерними процессами?  
- Команда **ps fax** (или **pstree**) показывает дерево процессов с иерархией.  

---

### 6. Какая команда позволит изменить приоритет процесса с идентификатором 1234 на более высокий?  
- Используется команда **renice** с отрицательным значением nice (чем меньше число, тем выше приоритет).  

---

### 7. В системе в настоящее время запущено 20 процессов dd. Как проще всего остановить их все сразу?  
- Использовать команду **killall dd**, которая завершает все процессы с именем **dd**.  

---

### 8. Какая команда позволяет остановить команду с именем mycommand?  
- Для этого используется команда **killall mycommand**.  

---

### 9. Какая команда используется в top, чтобы убить процесс?  
- В **top** для завершения процесса используется клавиша **k**, после чего указывается PID процесса.  

---

### 10. Как запустить команду с достаточно высоким приоритетом, не рискуя, что не хватит ресурсов для других процессов?  
- Для запуска с пониженным приоритетом (что гарантирует ресурс другим процессам) используется команда **nice** с положительным значением.  

---

# Заключение  

В ходе работы были изучены основные приёмы управления процессами и заданиями в Linux. Рассмотрены способы запуска процессов в фоновом и переднем планах, их приостановка, возобновление и завершение. Освоены инструменты изменения приоритета процессов с помощью утилит **nice** и **renice**, а также методы массового завершения процессов через **killall**. Дополнительно были изучены средства мониторинга системных ресурсов с помощью **top** и команды для анализа иерархии процессов. Полученные знания позволяют эффективно контролировать работу процессов и управлять их ресурсами в многозадачной среде.  
