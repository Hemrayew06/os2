---
## Front matter
lang: ru-RU
title: Лабораторная работа №16
subtitle: Программный RAID
author:
  - Максат Хемраев
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 03 декабря 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цель работы

## Основная цель

Освоить создание и администрирование RAID-массивов в Linux с использованием утилиты **mdadm**.

# Ход выполнения работы

## Подготовка дисков

- Получены права суперпользователя
- Просмотрены доступные устройства `/dev/sd*`
- Созданы разделы на /dev/sdd, /dev/sde, /dev/sdf

![Просмотр дисков](Screenshot_1.png){ #fig:001 width=70% }

## Настройка разделов под RAID

- Проверен тип созданных партиций (тип 83)
- Найден тип для RAID — **fd (Linux raid autodetect)**
- Тип изменён на fd для всех трёх дисков

![Изменение типа партиций](Screenshot_3.png){ #fig:002 width=70% }

## Проверка структуры разделов

- Каждый диск содержит один раздел с типом RAID
- Разметка отображается корректно

![Состояние дисков](Screenshot_4.png){ #fig:003 width=70% }

# Создание RAID 1

## Сборка RAID1

- Создан массив из /dev/sdc1 и /dev/sdd1
- Успешно инициализирован

![Создание RAID1](Screenshot_5.png){ #fig:004 width=70% }

## Проверка состояния RAID1

- Оба диска активны и синхронизированы  
- Ошибок нет

![Проверка RAID](Screenshot_6.png){ #fig:005 width=70% }

## Создание файловой системы и монтирование

- Создана файловая система ext4
- RAID смонтирован в `/mnt/raid`
- Добавлена запись в `/etc/fstab`

![fstab запись](Screenshot_8.png){ #fig:006 width=70% }

# Замена диска в RAID1

## Симуляция сбоя

- Сбой инициирован на /dev/sdc1
- Диск удалён из массива

## Добавление нового диска

- В массив добавлен /dev/sdf1
- Массив восстановлен и синхронизирован

![Восстановление RAID](Screenshot_9.png){ #fig:007 width=70% }

## Очистка суперблоков

- RAID остановлен
- Метаданные удалены с дисков

![Очистка суперблоков](Screenshot_10.png){ #fig:008 width=70% }

# RAID1 с горячим резервом

## Создание RAID1 и добавление hot spare

- Массив создан на двух дисках
- Третий диск /dev/sdf1 добавлен как резервный

![Hot spare](Screenshot_11.png){ #fig:009 width=70% }

## Проверка работы hot spare

- При сбое одного диска  
  массив автоматически использует резервный

![Пересборка массива](Screenshot_13.png){ #fig:010 width=70% }

# Преобразование RAID1 → RAID5

## Подготовка массива

- RAID1 создан снова
- Добавлен третий диск (spare)

![Перед конверсией](Screenshot_14.png){ #fig:011 width=70% }

## Изменение уровня RAID

- Массив преобразован в RAID5 (`--level=5`)
- Начался процесс reshaping

![Преобразование RAID](Screenshot_16.png){ #fig:012 width=70% }

## Увеличение количества дисков

- RAID расширен до трёх устройств  
- Пересборка выполняется корректно

![RAID5 пересборка](Screenshot_17.png){ #fig:013 width=70% }

# Итоги работы

## Вывод

В ходе работы освоены:

- создание RAID 1  
- использование горячего резерва  
- преобразование массива RAID 1 в RAID 5  
- работа с утилитой **mdadm**, анализ состояния и восстановление массива

Получены практические навыки администрирования систем хранения данных и обеспечения отказоустойчивости.
