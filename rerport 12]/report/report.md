---
## Front matter
title: "Отчёт по лабораторной работе №12"
subtitle: "Настройки сети в Linux"
author: "Максат Хемраев"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки настройки сетевых параметров системы.

# Отчёт по выполнению работе  

## Проверка конфигурации сети  

1. Для начала были получены права суперпользователя с помощью команды su. Это необходимо для выполнения сетевых операций, требующих административных полномочий.  

2. Затем была выведена информация о сетевых интерфейсах и статистике передачи пакетов командой ip -s link.  
   Интерфейс **enp0s3** находится в состоянии **UP**, что означает его активность. Он имеет MAC-адрес `08:00:27:ca:ee:f1`. Из статистики видно, что интерфейс успешно передаёт и получает пакеты без ошибок и потерь.  

   ![Информация о сетевых интерфейсах](Screenshot_1.png){ #fig:001 width=80% }

3. Далее были отображены текущие маршруты командой ip route show.  
   Таблица маршрутизации показала, что основной маршрут по умолчанию направлен через шлюз **10.0.2.2**, а локальная сеть **10.0.2.0/24** доступна через интерфейс **enp0s3**. Это подтверждает корректную настройку сетевого взаимодействия в пределах локальной сети.  

4. С помощью команды ip addr show были выведены текущие IP-адреса интерфейсов.  
   Интерфейс **enp0s3** имеет IPv4-адрес **10.0.2.15/24** и несколько IPv6-адресов. Таким образом, можно заключить, что основной сетевой адаптер системы — **enp0s3**, а его IPv4-адрес равен **10.0.2.15**.  

   ![Проверка адресации интерфейсов](Screenshot_2.png){ #fig:002 width=80% }

5. Для проверки доступности интернет-соединения была использована команда ping -c 4 8.8.8.8.  
   Ответы от узла **8.8.8.8** с временем отклика около 21 мс подтверждают, что подключение к Интернету функционирует корректно.  

6. В систему был добавлен дополнительный IP-адрес **10.0.0.10/24** для интерфейса **enp0s3** с помощью команды ip addr add 10.0.0.10/24 dev enp0s3.  
   После этого команда ip addr show подтвердила успешное добавление нового адреса.  

7. Для сравнения информации, предоставляемой утилитами, была выполнена команда ifconfig.  
   Данные, отображённые ifconfig, совпадают с выводом ip, подтверждая корректное состояние интерфейсов и наличие обоих IP-адресов.  

   ![Сравнение вывода ip и ifconfig](Screenshot_3.png){ #fig:003 width=80% }

8. Заключительным этапом был просмотр списка всех активных портов с помощью команды ss -tul.  
   В списке были выявлены порты, открытые для служб **SSH**, **HTTP**, **FTP** и **WebSM**, что подтверждает активность соответствующих сервисов на данном узле.  

## Управление сетевыми подключениями с помощью nmcli  

1. Для начала были получены права суперпользователя с помощью команды su.  
   После этого была выведена информация о текущих сетевых соединениях с использованием команды nmcli connection show.  
   В списке присутствовали активные подключения для интерфейсов **enp0s3** и **lo**.  

   ![Просмотр текущих сетевых подключений](Screenshot_4.png){ #fig:004 width=80% }

2. Было добавлено новое Ethernet-соединение с именем **dhcp**, привязанное к интерфейсу **enp0s3**.  
   Это соединение использует автоматическое получение параметров сети через протокол DHCP.  
   После выполнения команды система подтвердила успешное добавление соединения.  

3. Далее для того же интерфейса **enp0s3** было создано ещё одно соединение — **static**, использующее статическую настройку IP.  
   Ему был назначен IPv4-адрес **10.0.0.10/24** и шлюз **10.0.0.1**.  
   В списке подключений появились оба новых профиля — **dhcp** и **static**.  

4. После создания конфигураций была выведена таблица соединений для проверки.  
   Команда nmcli connection show показала наличие четырёх записей: **enp0s3**, **lo**, **dhcp** и **static**.  

   ![Создание соединений DHCP и Static](Screenshot_5.png){ #fig:005 width=80% }

5. Затем активировано статическое соединение командой nmcli connection up static.  
   Проверка через nmcli connection show и ip addr подтвердила, что интерфейсу **enp0s3** назначен статический IP-адрес **10.0.0.10/24**.  
   Сетевой адаптер успешно перешёл в режим статической конфигурации.  

6. Для восстановления исходных параметров было выполнено переключение обратно на соединение **dhcp** командой nmcli connection up dhcp.  
   Проверка показала, что интерфейс **enp0s3** вновь получил IP-адрес **10.0.2.15**, выданный DHCP-сервером, что подтверждает корректность возврата к динамической конфигурации.  

   ![Переключение между DHCP и Static соединениями](Screenshot_6.png){ #fig:006 width=80% }

## Изменение параметров соединения с помощью nmcli  

1. Для начала было отключено автоматическое подключение профиля **static** с помощью команды nmcli connection modify static connection.autoconnect no.  
   Это позволяет избежать автоматической активации данного соединения при загрузке системы.  

2. Далее в конфигурацию **static** был добавлен DNS-сервер **10.0.0.10**.  
   После этого добавлен второй DNS-сервер — **8.8.8.8** с использованием оператора **+**, что позволило не перезаписать, а дополнить список DNS-серверов.  

3. Затем IP-адрес соединения **static** был изменён на **10.0.0.20/24**, а также добавлен дополнительный адрес **10.20.30.40/16**.  
   Эти параметры обеспечивают поддержку нескольких сетей для одного интерфейса.  

4. После внесения всех изменений соединение **static** было активировано командой nmcli connection up static.  
   Проверка через nmcli connection show и ip addr подтвердила успешное применение новых параметров — интерфейс **enp0s3** получил IP-адреса **10.0.0.20** и **10.20.30.40**.  

   ![Проверка внесённых изменений и активного соединения](Screenshot_7.png){ #fig:007 width=80% }

5. Для наглядного подтверждения конфигурации был использован инструмент **nmtui**.  
   На экране редактирования соединения видно, что профиль **static** использует два IP-адреса, шлюз **10.0.0.1**, а также DNS-серверы **10.0.0.10** и **8.8.8.8**.  

   ![Параметры соединения static в nmtui](Screenshot_8.png){ #fig:008 width=80% }

6. В интерфейсе **nmtui** также проверен профиль **dhcp**, который настроен на автоматическое подключение и автоматическое получение параметров IPv4 и IPv6.  

   ![Параметры соединения dhcp в nmtui](Screenshot_9.png){ #fig:009 width=80% }

7. Настройки сети были дополнительно просмотрены через графический интерфейс системы.  
   Видно, что активное соединение **static** имеет IP-адрес **10.20.30.40**, шлюз **10.0.0.1** и DNS-серверы **10.0.0.10** и **8.8.8.8**, что полностью соответствует заданным параметрам.  

   ![Проверка соединения static в графическом интерфейсе](Screenshot_10.png){ #fig:010 width=80% }

8. В завершение было выполнено переключение обратно на соединение **dhcp**.  
   Проверка показала, что интерфейс **enp0s3** успешно вернулся к динамической конфигурации и теперь использует DNS-сервер **10.0.2.3**, полученный от DHCP-сервера.  

   ![Переключение обратно на соединение DHCP](Screenshot_11.png){ #fig:011 width=80% }

# Контрольные вопросы  

### 1. Какая команда отображает только статус соединения, но не IP-адрес?  
- `nmcli device status` — показывает текущее состояние сетевых устройств и их типы без вывода IP-адресов.  

---

### 2. Какая служба управляет сетью в ОС типа RHEL?  
- Сетевыми подключениями управляет служба **NetworkManager**.  

---

### 3. Какой файл содержит имя узла (устройства) в ОС типа RHEL?  
- Имя узла хранится в файле **/etc/hostname**.  

---

### 4. Какая команда позволяет вам задать имя узла (устройства)?  
- Команда `hostnamectl set-hostname <имя_узла>` используется для изменения имени устройства.  

---

### 5. Какой конфигурационный файл можно изменить для включения разрешения имён для конкретного IP-адреса?  
- Для сопоставления IP-адресов с именами узлов используется файл **/etc/hosts**.  

---

### 6. Какая команда показывает текущую конфигурацию маршрутизации?  
- Команда `ip route show` отображает таблицу маршрутизации.  

---

### 7. Как проверить текущий статус службы NetworkManager?  
- Проверка выполняется командой `systemctl status NetworkManager`.  

---

### 8. Какая команда позволяет вам изменить текущий IP-адрес и шлюз по умолчанию для вашего сетевого соединения?  
- Команда `nmcli connection modify <имя_соединения> ipv4.addresses <адрес>/<маска> gw4 <шлюз>` позволяет задать новый IP-адрес и шлюз.  


# Заключение  

В ходе работы были рассмотрены основные команды и инструменты для настройки сетевых интерфейсов и управления соединениями в Linux.  
Освоены принципы работы с утилитой **nmcli**, создание и изменение сетевых профилей, настройка статических и динамических адресов, а также использование инструментов **nmtui** и графического интерфейса для контроля параметров сети.  
